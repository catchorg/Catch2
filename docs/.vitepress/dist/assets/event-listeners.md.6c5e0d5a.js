import{_ as s,c as n,o as e,a}from"./app.f3758f8e.js";const D=JSON.parse('{"title":"Event Listeners","description":"","frontmatter":{},"headers":[],"relativePath":"event-listeners.md","lastUpdated":1637577876000}'),t={name:"event-listeners.md"},p=a(`<p><a id="top"></a></p><h1 id="event-listeners" tabindex="-1">Event Listeners <a class="header-anchor" href="#event-listeners" aria-hidden="true">#</a></h1><p>An event listener is a bit like a reporter, in that it responds to various reporter events in Catch2, but it is not expected to write any output. Instead, an event listener performs actions within the test process, such as performing global initialization (e.g. of a C library), or cleaning out in-memory logs if they are not needed (the test case passed).</p><p>Unlike reporters, each registered event listener is always active. Event listeners are always notified before reporter(s).</p><p>To write your own event listener, you should derive from <code>Catch::TestEventListenerBase</code>, as it provides empty stubs for all reporter events, allowing you to only override events you care for. Afterwards you have to register it with Catch2 using <code>CATCH_REGISTER_LISTENER</code> macro, so that Catch2 knows about it and instantiates it before running tests.</p><p>Example event listener:</p><div class="language-cpp line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;font-style:italic;">#include</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">catch2/reporters/catch_reporter_event_listener.hpp</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">#include</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">catch2/reporters/catch_reporter_registrars.hpp</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">testRunListener</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">public</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Catch</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">EventListenerBase</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#F78C6C;">using</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Catch</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">EventListenerBase</span><span style="color:#89DDFF;">::</span><span style="color:#F07178;">EventListenerBase</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">void</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">testRunStarting</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">Catch</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">TestRunInfo</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const&amp;</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">override</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">lib_foo_init</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">CATCH_REGISTER_LISTENER</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">testRunListener</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><em>Note that you should not use any assertion macros within a Listener!</em></p><p><a href="./reporter-events.html#top">You can find the list of events that the listeners can react to on its own page</a>.</p><hr><p><a href="./Readme.html#top">Home</a></p>`,11),l=[p];function o(r,c,i,F,y,d){return e(),n("div",null,l)}var h=s(t,[["render",o]]);export{D as __pageData,h as default};
